"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1685],{71685:function(t,e,o){o.r(e);var n=o(23273),l=o.n(n),c=o(83083),u=o(94246),s=o(11163),r=o(67294);let i=t=>{let e=[],{theme:o}=(0,c.O)(),n=async t=>{t.forEach(t=>{t.slug=t.slug.startsWith("/")?t.slug:"/".concat(t.slug)});try{await (0,u.TY)(l().COMMENT_TWIKOO_CDN_URL,"js");let o=window.twikoo;o.getCommentsCount({envId:l().COMMENT_TWIKOO_ENV_ID,urls:null==t?void 0:t.map(t=>t.slug),includeReply:!0}).then(function(t){e=t,i()}).catch(function(t){console.error(t)})}catch(t){console.error("twikoo 加载失败",t)}},i=()=>{0!==e.length&&t.posts.forEach(t=>{let o=e.find(e=>e.url===t.slug);if(o){let e=document.querySelectorAll(".comment-count-text-".concat(t.id));e.forEach(t=>{t.innerHTML=o.count});let n=document.querySelectorAll(".comment-count-wrapper-".concat(t.id));n.forEach(t=>{t.classList.remove("hidden")})}})},a=(0,s.useRouter)();return(0,r.useEffect)(()=>{var e;(null==t?void 0:t.posts)&&(null==t?void 0:null===(e=t.posts)||void 0===e?void 0:e.length)>0&&n(t.posts)},[a.events]),(0,r.useEffect)(()=>{i()},[o]),null};e.default=i}}]);