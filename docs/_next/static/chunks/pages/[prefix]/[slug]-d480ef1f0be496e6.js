(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5549],{74387:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[prefix]/[slug]",function(){return l(34316)}])},34316:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return u}});var n=l(85893),o=l(34331);let i=e=>(0,n.jsx)(o.default,{...e});var u=!0;t.default=i},34331:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return _},default:function(){return b},getRecommendPost:function(){return h}});var n=l(85893),o=l(23273),i=l.n(o),u=l(67294),d=l(11163),r=l(58622);let a={header:0,sub_header:1,sub_sub_header:2},s=(e,t)=>{var l;let n=null!==(l=e.content)&&void 0!==l?l:[],o=function e(t,l,n){if(n||(n=[]),!t)return n;for(let d of t){var o,i,u;let t=null===(o=l.block[d])||void 0===o?void 0:o.value;if(!t)continue;let{type:s}=t;if(s.indexOf("header")>=0){let e=n.find(e=>e.id===d);e||n.push({id:d,type:s,text:(0,r.FB)(null===(u=t.properties)||void 0===u?void 0:u.title),indentLevel:a[s]})}(null===(i=t.content)||void 0===i?void 0:i.length)>0&&e(t.content,l,n)}return n}(n,t),i=[{actual:-1,effective:-1}];for(let e of o){let{indentLevel:t}=e;for(;;){let l=i[i.length-1],{actual:n,effective:o}=l;if(t>n)e.indentLevel=o+1,i.push({actual:t,effective:e.indentLevel});else if(t===n){e.indentLevel=o;break}else i.pop()}}return o};var v=l(66766),c=l(88495),f=l.n(c),p=l(94246);let g=e=>{var t,l;let{post:o,siteInfo:r}=e,a=(0,d.useRouter)(),[c,g]=(0,u.useState)((null==o?void 0:o.password)&&(null==o?void 0:o.password)!==""),_=e=>{let t=f()(o.slug+e);return!!e&&t===o.password&&(g(!1),!0)};(0,u.useEffect)(()=>{if(o||setTimeout(()=>{if(p.jU){let e=document.getElementById("notion-article");e||a.push("/404").then(()=>{console.warn("找不到页面",a.asPath)})}},8e3),(null==o?void 0:o.password)&&(null==o?void 0:o.password)!=="")g(!0);else{var e;g(!1),!c&&(null==o?void 0:null===(e=o.blockMap)||void 0===e?void 0:e.block)&&(o.content=Object.keys(o.blockMap.block).filter(e=>{var t,l;return(null===(t=o.blockMap.block[e])||void 0===t?void 0:null===(l=t.value)||void 0===l?void 0:l.parent_id)===o.id}),o.toc=s(o,o.blockMap))}},[o]);let h={title:o?"".concat(null==o?void 0:o.title," | ").concat(null==r?void 0:r.title):"".concat((null==e?void 0:null===(t=e.siteInfo)||void 0===t?void 0:t.title)||i().TITLE," | loading"),description:null==o?void 0:o.summary,type:null==o?void 0:o.type,slug:null==o?void 0:o.slug,image:(null==o?void 0:o.pageCoverThumbnail)||(null==r?void 0:r.pageCover)||i().HOME_BANNER_IMAGE,category:null==o?void 0:null===(l=o.category)||void 0===l?void 0:l[0],tags:null==o?void 0:o.tags};e={...e,lock:c,meta:h,setLock:g,validPassword:_};let b=(0,v.getLayoutByTheme)((0,d.useRouter)());return(0,n.jsx)(b,{...e})};var _=!0;function h(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=[],o=[],i=(null==e?void 0:e.tags)||[];for(let l=0;l<t.length;l++){let u=t[l];if(!(u.id===e.id||0>u.type.indexOf("Post")))for(let e=0;e<i.length;e++){let t=i[e];!(o.indexOf(u.id)>-1)&&u.tags&&u.tags.indexOf(t)>-1&&(n.push(u),o.push(u.id))}}return n.length>l&&(n=n.slice(0,l)),n}var b=g}},function(e){e.O(0,[8495,9774,2888,179],function(){return e(e.s=74387)}),_N_E=e.O()}]);