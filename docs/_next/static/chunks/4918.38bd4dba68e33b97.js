"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4918],{34918:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var r=a(85893),s=a(23273),l=a.n(s),n=a(83083),c=a(11163),i=a(67294),o=a(24955),d=a.n(o),u=a(2375),x=a(41664),h=a.n(x),m=a(23493),f=a.n(m);function p(e){let{cRef:t}=e,[a,s]=(0,i.useState)([]),[n,c]=(0,i.useState)(!1),[o,x]=(0,i.useState)(0),[h,m]=(0,i.useState)(null),[p,j]=(0,i.useState)(0),[v,y]=(0,i.useState)(0),[N,k]=(0,i.useState)(0);(0,i.useImperativeHandle)(t,()=>({openSearch:()=>{c(!0)}}));let A=d()(l().ALGOLIA_APP_ID,l().ALGOLIA_SEARCH_ONLY_APP_KEY),w=A.initIndex(l().ALGOLIA_INDEX),_=async(e,t)=>{if(m(e),x(t),s([]),k(0),j(0),y(0),e&&""!==e)try{let a=await w.search(e,{page:t,hitsPerPage:10}),{hits:r,nbHits:l,nbPages:n,processingTimeMS:c}=a;k(c),j(n),y(l),s(r);let i=document.getElementById("search-wrapper").getElementsByClassName("replace");setTimeout(()=>{(0,u.Z)({doms:i,search:e,target:{element:"span",className:"text-blue-600 border-b border-dashed"}})},150)}catch(e){console.error("Algolia search error:",e)}},I=(0,i.useRef)(f()(_,300)),S=e=>{let t=e.target.value;I.current(t,0)},C=e=>{I.current(h,e)},P=()=>{c(!1)};return l().ALGOLIA_APP_ID?(0,r.jsxs)("div",{id:"search-wrapper",className:"".concat(n?"opacity-100":"invisible opacity-0 pointer-events-none"," fixed h-screen w-screen left-0 top-0 mt-12 flex items-start justify-center"),children:[(0,r.jsxs)("div",{className:"".concat(n?"opacity-100":"invisible opacity-0 translate-y-10"," flex flex-col justify-between w-full min-h-[10rem] max-w-xl dark:bg-hexo-black-gray dark:border-gray-800 bg-white dark:bg- p-5 rounded-lg z-50 shadow border hover:border-blue-600 duration-300 transition-all "),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-2xl text-blue-600 font-bold",children:"搜索"}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"text-gray-600 fa-solid fa-xmark p-1 cursor-pointer hover:text-blue-600",onClick:P})})]}),(0,r.jsx)("input",{type:"text",placeholder:"在这里输入搜索关键词...",onChange:e=>S(e),className:"text-black dark:text-gray-200 bg-gray-50 dark:bg-gray-600 outline-blue-500 w-full px-4 my-2 py-1 mb-4 border rounded-md"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(b,{})}),(0,r.jsx)("ul",{children:a.map(e=>(0,r.jsx)("li",{className:"replace my-2",children:(0,r.jsx)("a",{href:"".concat(l().SUB_PATH,"/").concat(e.slug),className:"font-bold hover:text-blue-600 text-black dark:text-gray-200",children:e.title})},e.objectID))}),(0,r.jsx)(g,{totalPage:p,page:o,switchPage:C}),(0,r.jsx)("div",{children:v>0&&(0,r.jsxs)("div",{children:["共搜索到 ",v," 条结果，用时 ",N," 毫秒"]})}),(0,r.jsxs)("div",{className:"text-gray-600 mt-2",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("i",{className:"fa-brands fa-algolia"})," Algolia 提供搜索服务"]})," "]})]}),(0,r.jsx)("div",{onClick:P,className:"z-30 fixed top-0 left-0 w-full h-full flex items-center justify-center glassmorphism"})]}):(0,r.jsx)(r.Fragment,{})}function b(e){let{tagOptions:t}=(0,n.O)(),a=null==t?void 0:t.slice(0,10);return(0,r.jsx)("div",{id:"tags-group",className:"dark:border-gray-700 space-y-2",children:null==a?void 0:a.map((e,t)=>(0,r.jsx)(h(),{passHref:!0,href:"/tag/".concat(encodeURIComponent(e.name)),className:"cursor-pointer inline-block whitespace-nowrap",children:(0,r.jsxs)("div",{className:" flex items-center text-black dark:text-gray-300 hover:bg-blue-600 dark:hover:bg-yellow-600 hover:scale-110 hover:text-white rounded-lg px-2 py-0.5 duration-150 transition-all",children:[(0,r.jsxs)("div",{className:"text-lg",children:[e.name," "]}),e.count?(0,r.jsx)("sup",{className:"relative ml-1",children:e.count}):(0,r.jsx)(r.Fragment,{})]})},t))})}function g(e){let{totalPage:t,page:a,switchPage:s}=e;if(t<=0)return(0,r.jsx)(r.Fragment,{});let l=[];for(let e=0;e<t;e++){let t=a===e;l.push(function(e,t,a){return(0,r.jsx)("div",{onClick:()=>a(e),className:"".concat(t?"font-bold text-white bg-blue-600 rounded":"hover:text-blue-600 hover:font-bold"," text-center cursor-pointer  w-6 h-6 "),children:e+1})}(e,t,s))}return(0,r.jsx)("div",{className:"flex space-x-1 w-full justify-center py-1",children:l.map(e=>e)})}function j(e){let{locale:t}=(0,n.O)(),a=(0,c.useRouter)(),s=(0,i.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:function(){l().ALGOLIA_APP_ID?s.current.openSearch():a.push("/search")},title:t.NAV.SEARCH,alt:t.NAV.SEARCH,className:"cursor-pointer hover:bg-black hover:bg-opacity-10 rounded-full w-10 h-10 flex justify-center items-center duration-200 transition-all",children:(0,r.jsx)("i",{title:t.NAV.SEARCH,className:"fa-solid fa-magnifying-glass"})}),(0,r.jsx)(p,{cRef:s,...e})]})}}}]);